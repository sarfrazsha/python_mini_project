<!DOCTYPE html>
<html>

<head>
    <title>Welcome, {{ name | upper }}</title>
</head>

<body>
    <h1>Hello, {{ name | upper }}!</h1>
    <p>Welcome to your personal dashboard, rendered using advanced Jinja templating.</p>

    <hr>

    <h2>User Permissions (For {{ name }}):</h2>
    {% set permissions = ["Read Access", "Write Access", "Delete Access", "Admin Access", "Reporting"] %}

    <ul>
        {% for permission in permissions %}
        <li>
            {{ permission | title }}
            {% if permission == "Admin Access" and name == "Amir" %}
            (Only for Superusers)
            {% endif %}
        </li>
        {% endfor %}
    </ul>

    <hr>

    {% macro render_item(label, value) %}
    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 5px;">
        <strong>{{ label | upper }}:</strong> {{ value }}
    </div>
    {% endmacro %}

    <h2>User Quick Facts</h2>
    {{ render_item("Username", name) }}

    {{ render_item("Status", "<b>Active</b> (ID: 456)" | safe) }}

    {{ render_item("Total Permissions", permissions | length) }}

</body>

</html>